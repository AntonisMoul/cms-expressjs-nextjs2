// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Redirect {
  id          Int      @id @default(autoincrement())
  from_url    String   @unique
  to_url      String
  status_code Int      @default(301) // 301, 302, 307, 308
  is_active   Boolean  @default(true)
  hits        Int      @default(0)
  last_hit    DateTime?
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@map("redirects")
}

model CacheEntry {
  id         Int      @id @default(autoincrement())
  key        String   @unique
  value      String   // JSON string
  tags       String?  // comma-separated tags
  expires_at DateTime?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("cache_entries")
}

model SitemapEntry {
  id          Int      @id @default(autoincrement())
  url         String   @unique
  lastmod     DateTime?
  changefreq  String?  // always, hourly, daily, weekly, monthly, yearly, never
  priority    Float?   // 0.0 to 1.0
  entity_type String?  // page, post, category, etc.
  entity_id   Int?
  is_active   Boolean  @default(true)
  created_at  DateTime @default(now())
  updated_at  DateTime @updatedAt

  @@map("sitemap_entries")
}

model SystemLog {
  id          Int      @id @default(autoincrement())
  level       String   // error, warn, info, debug
  message     String
  context     String?  // JSON string
  user_id     Int?
  ip_address  String?
  user_agent  String?
  created_at  DateTime @default(now())

  @@map("system_logs")
}
